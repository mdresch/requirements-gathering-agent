# DatabaseSchema

**Generated by Requirements Gathering Agent v2.1.2**  
**Category:** technical-design  
**Generated:** 2025-06-17T04:12:55.886Z  
**Description:** 

---

## Database Schema Design Document: Automated Documentation Project Assistant (ADPA)

**1. Database Overview:**

This document outlines the database schema for the Automated Documentation Project Assistant (ADPA) application.  The database will be relational, utilizing a PostgreSQL database for its robust features, scalability, and ACID properties.  The schema is designed to efficiently store and retrieve project information, generated documents, and system metadata.  The focus is on data integrity, scalability, and performance optimization.


**2. Entity Relationship Diagram (ERD):**

*(Placeholder for ERD Diagram.  A visual ERD would be included here, generated using a tool like Lucidchart, draw.io, or similar.  The ERD would show the entities described below and their relationships.)*


**3. Table Definitions:**

The database will consist of the following tables:

**3.1 Projects:**

| Column Name          | Data Type     | Constraints                               | Description                                                                  |
|----------------------|----------------|-------------------------------------------|------------------------------------------------------------------------------|
| project_id           | SERIAL         | PRIMARY KEY, NOT NULL                      | Unique identifier for each project.                                            |
| project_name         | VARCHAR(255)   | NOT NULL                                   | Name of the project.                                                          |
| description          | TEXT           |                                           | Brief description of the project.                                             |
| created_at           | TIMESTAMP      | DEFAULT CURRENT_TIMESTAMP                 | Timestamp indicating project creation.                                        |
| updated_at           | TIMESTAMP      | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | Timestamp indicating last project update.                                     |
| user_id              | INTEGER        | REFERENCES Users(user_id)                 | ID of the user who created the project.                                      |
| ai_provider          | VARCHAR(50)    | CHECK (ai_provider IN ('Azure', 'Google', 'GitHub', 'Ollama')) | AI provider used for document generation.                                     |
| context_file_path    | VARCHAR(255)   |                                           | Path to the main context file (e.g., README.md).                             |


**3.2 Documents:**

| Column Name          | Data Type     | Constraints                               | Description                                                                          |
|----------------------|----------------|-------------------------------------------|--------------------------------------------------------------------------------------|
| document_id          | SERIAL         | PRIMARY KEY, NOT NULL                      | Unique identifier for each generated document.                                       |
| project_id           | INTEGER        | REFERENCES Projects(project_id)           | ID of the project this document belongs to.                                        |
| document_type        | VARCHAR(50)    | NOT NULL                                   | Type of document (e.g., Project Charter, Stakeholder Register, etc.).               |
| document_name        | VARCHAR(255)   | NOT NULL                                   | Name of the document.                                                              |
| content              | TEXT           |                                           | Content of the document.                                                           |
| generated_at         | TIMESTAMP      | DEFAULT CURRENT_TIMESTAMP                 | Timestamp indicating document generation.                                             |
| version              | INTEGER        | DEFAULT 1                                 | Version number of the document.                                                   |
| pmbok_compliance_score | INTEGER        | CHECK (pmbok_compliance_score BETWEEN 0 AND 100) | Score indicating PMBOK compliance (0-100).                                          |
| quality_score        | INTEGER        | CHECK (quality_score BETWEEN 0 AND 100)     | Overall quality score of the document (0-100).                                     |


**3.3 Users:**

| Column Name      | Data Type     | Constraints                               | Description                                      |
|------------------|----------------|-------------------------------------------|--------------------------------------------------|
| user_id          | SERIAL         | PRIMARY KEY, NOT NULL                      | Unique identifier for each user.                   |
| username         | VARCHAR(255)   | UNIQUE, NOT NULL                           | User's username.                                 |
| password_hash    | VARCHAR(255)   | NOT NULL                                   | Hashed password for security.                    |
| email            | VARCHAR(255)   | UNIQUE, NOT NULL                           | User's email address.                             |
| created_at       | TIMESTAMP      | DEFAULT CURRENT_TIMESTAMP                 | Timestamp indicating user creation.                |
| updated_at       | TIMESTAMP      | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | Timestamp indicating last user update.             |


**3.4 Files (for Discovered Documents):**

| Column Name      | Data Type     | Constraints                               | Description                                                              |
|------------------|----------------|-------------------------------------------|--------------------------------------------------------------------------|
| file_id          | SERIAL         | PRIMARY KEY, NOT NULL                      | Unique identifier for each discovered file.                             |
| project_id       | INTEGER        | REFERENCES Projects(project_id)           | Project the file belongs to.                                             |
| file_path        | VARCHAR(255)   | NOT NULL                                   | Path to the file.                                                        |
| relevance_score  | INTEGER        | CHECK (relevance_score BETWEEN 0 AND 100) | Relevance score assigned by the system (0-100).                           |
| file_type        | VARCHAR(50)    |                                           | Type of file (e.g., markdown, json, txt).                               |
| category         | VARCHAR(50)    |                                           | Category assigned to the file (e.g., Primary, Planning, Development, etc.) |
| last_updated     | TIMESTAMP      | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | Last updated timestamp of the file.                                           |


**3.5  Document_Versions (for Version Control):**

| Column Name      | Data Type     | Constraints                                     | Description                                                                 |
|------------------|----------------|-------------------------------------------------|-----------------------------------------------------------------------------|
| version_id       | SERIAL         | PRIMARY KEY, NOT NULL                             | Unique ID for each document version.                                         |
| document_id      | INTEGER        | REFERENCES Documents(document_id)                 | ID of the document this version belongs to.                               |
| version_number   | INTEGER        | NOT NULL                                        | Version number.                                                              |
| content          | TEXT           |                                                 | Content of the document version.                                             |
| created_at       | TIMESTAMP      | DEFAULT CURRENT_TIMESTAMP                       | Timestamp of version creation.                                                |
| ai_model         | VARCHAR(255)   |                                                 | AI model used to generate this version (if applicable).                       |
| commit_hash      | VARCHAR(40)    |                                                 | Git commit hash (if version control is integrated).                           |



**4. Data Types:**

Standard PostgreSQL data types will be used as defined in the table definitions above.


**5. Indexes and Keys:**

Appropriate indexes will be created on foreign key columns and frequently queried columns (e.g., `project_id`, `document_type`, `created_at`) to optimize query performance.  Primary and unique constraints are defined as needed to ensure data integrity.


**6. Constraints:**

Constraints, including `NOT NULL`, `UNIQUE`, `CHECK`, and foreign key constraints, will be implemented to enforce data integrity and validity as specified in the table definitions.


**7. Normalization Strategy:**

The schema is designed using a normalized approach (likely 3NF) to minimize data redundancy and improve data integrity.


**8. Performance Considerations:**

* **Indexing:**  Strategic indexing will be crucial for fast query performance.
* **Query Optimization:**  Regular review and optimization of queries will be performed.
* **Database Tuning:**  Appropriate database configuration and tuning will be implemented.
* **Caching:**  Caching mechanisms may be implemented to reduce database load for frequently accessed data.


**9. Data Migration Strategy:**

A phased approach to data migration will be used, starting with a development environment and then migrating to a production environment.  Data validation and verification steps will be included at each stage.


**10. Backup and Recovery:**

Regular backups of the database will be performed, and a robust recovery plan will be implemented to ensure data availability and minimize downtime in case of failure.


**11.  Future Considerations:**

* **Scalability:** The schema is designed to handle a large number of projects and documents.  Further scaling can be achieved through techniques like sharding or read replicas as needed.
* **Security:**  Security measures, including access control and encryption, will be implemented to protect sensitive data.
* **Extensibility:** The schema should be designed to accommodate future features and document types without major restructuring.


This schema provides a solid foundation for the ADPA application.  Further refinements and adjustments may be necessary during development and deployment based on specific requirements and performance testing.  The ERD will be a critical component for visualizing the relationships between entities and ensuring data consistency.
